@using NuGet.Protocol
@using OnlineShop.ViewModels
@model List<OnlineShop.ViewModels.DishViewModel>

@{
    ViewData["Title"] = "Index";
    Layout = "_Layout";
    ViewBag["Cart"] = new List<DishViewModel>();
}

<div class="dish-container">
    <h1>Welcome to Sivach Shop!</h1>

    <script src="~/js/menu/app.js"></script>
    <table class="dish-table">
        @for (var i = 0; i < Model.Count;)
        {
            <tr>
                @do
                {
                    <td>
                        <div class="dish-card">
                            <img src="@Model[i].PhotoUrl" alt="@Model[i].PhotoName" class="dish-photo"/>
                            <h2>@Model[i].Name</h2>
                            <p class="price">Price: @Model[i].Price @Model[i].Currency</p>
                            <a href="@Url.Action("Details", "Dish", new { id = Model[i].Id })" class="details-link">View Details</a>
                            <button class="order-button" onclick="@ViewBag["Cart"].Add(Model[i])">Add to order</button>
                        </div>
                    </td>
                    i++;
                } while (i % 3 != 0 && i < Model.Count); 

                @if ((i + 1) % 3 == 0)
                {
                    <div class="clearfix"></div>
                }
            </tr>
        }
    </table>
</div>